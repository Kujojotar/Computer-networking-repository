# 计算机网络-第二章-应用层

#### 2.1.1网络应用程序体系结构

从应用**程序研发者的角度**来看，网络体系结构是**固定**的，并为应用程序提供了特定的服务集合。

应用程序体系结构由应用程序研发者设计，规范了如何在各种端系统上组织该应用程序。

两种主流应用程序体系结构:客户-服务器体系结构 **C/S**  对等结构  **P2P**

**客户-服务器**体系结构概述:

总是打开的主机叫做**服务器**，它服务于许多其他称为客户的主机的请求。典型的例子是Web应用程序，总是打开的Web服务器服务于来自浏览器（运行在客户主机上)的请求。当Web服务器接收到客户对某对象的请求时，它向该客户发送所请求的对象称为**响应**。

服务器具有固定的，周知的地址并服务器总是打开的，客户总是能够通过向该服务器的**IP地址**发送**分组**来与其联系。著名的C/S结构应用程序有:Web,FTP,Telnet与电子邮件。

数据中心:配备了大量的主机，常用于创建强大的虚拟服务器，以满足多个用户的请求--不像你软。服务提供商必须支付不断出现的互联与带宽费用，以发送和接收到达/来自数据中心的数据。

**带宽**:用于描述网络或线路理论上传输数据的最高速率。

**互联**:两个物理网络间至少有一个在物理上连接的线路。



P2P体系结构概述:

位于数据中心的专用服务器有最小的或者没有依赖。相反，应用程序在间断连接的主机对之间使用直接通信，这些主机对被称为对等方。对等方大多不为服务提供商所有。

P2P结构服务:文件共享，迅雷，因特网电话，IPTV。

某些应用具有混合的体系结构，结合了C/S结构与P2P结构。

P2P特点:**自扩展性**，可以利用对等方拓展系统服务能力，成本最有效。

P2P挑战:

**ISP友好**:大部分住宅ISP受制于非对等带宽应用(下载比上传多得多)，为ISP带来巨大压力。

**安全性**:高度分布和开放特性为安全带来挑战。

**激励**:激励用户自愿为应用提供带宽，存储资源，对激励设计带来挑战。





#### 进程通信

两个不同端系统上的进程，通过跨越计算机网络**交换报文**而进行相互通信，发送进程生成并向网络中发送报文，操作进程接收这些报文并可能通过将这些报文发送回去进行响应。



1.客户与服务器进程

  网络应用程序由**成对的进程**组成，这些进程通过网络互相**交换报文**。

如Web应用中，一个**客户浏览器进程**和一台**Web服务器进程**交换报文。P2P中，文件从对等方的一个进程传输到另一个对等方的进程。对每对通信进程，我们常将两个进程之一标识为**用户**，而另一个进程标识为**服务器**。对Web，浏览器进程为客户，Web服务器进程为服务器。对P2P文件共享，下载文件的对等方标识为客户，上传文件的对等方标识为服务器。

客户/服务器的定义:在给定的一对进程之间的通信会话场景中，**发起通信的进程标识为客户，会话开始时等待通信的进程标识为服务器**。



进程与计算机网络之间的**接口**

两个进程互发报文的过程中，进程通过一个称为套接字的软件接口向网络发送报文和从网络接收报文。**套接字**是同一台主机内**应用层与运输层**之间的接口，套接字也被称为**应用程序编程接口**。应用程序可以控制套接字在应用层端的一切，但对该套接字在运输层端几乎没有控制权。对运输层端的控制局限于：选择运输层协议，设定几个运输层参数。



3.进程寻址

标识进程需要定义两个信息:**主机的地址**，目的主机中接收进程的**标识符**。





#### 2.1.3 可供应用程序使用的运输服务

**运输层协议**负责使报文进入接收进程的套接字。

运输层协议的四个分类：



1.**可靠数据传输**

  分组可能在计算机网络中丢失。部分服务如银行金融不允许数据丢失，这时就必须确保由应用程序一端发送的数据**完全正确**地交付给应用程序的另一端。如果一个协议提供了这样的确保数据交付服务，就认为提供了**可靠数据传输服务**。当一个运输协议提供可靠数据传输服务时，发送进程只要将其数据传递进套接字，就可以完全相信该数据能无差别的到达接收进程。

  当然，某些应用程序像多媒体应用容忍一定限度内的数据丢失，这些丢失不会对应用带来致命的损伤，这是可以考虑采用**不提供可靠数据传输服务**的传输层协议。



2. **吞吐量**

   定义:**发送进程能够向接收进程交付比特的速率**。
   
   由于其他会话共享沿该网络路径的带宽，且这些会话随时都会到达或离开，该可用吞吐量将随时间波动，这边要求**运输层协议能够以某种特定的速率提供确保的可用吞吐量**。也就是说，某些应用程序能够**请求r比特每秒的吞吐量**，对因特网等**带宽敏感应用**如电话，很具有吸引力。而弹性应用可以根据情况或多或少的使用吞吐量。如:电子邮件，文件传输以及Web应用。



   3.定时

​        **发送方注入套接字中每个比特到达接收方的套接字不迟于某一时间限制**。对于打游戏不卡等情景具有吸引力。



  4.安全性

​         运输层协议为应用提供一种或多种安全性服务。例如:在发送主机中，运输层协议能够加密由发送进程传输的所有数据，在接收主机中，运输层协议能够在数据交付到接收进程之前解密这些数据。除了提供机密性之外，运输层协议还能够提供数据完整性检测，端点鉴别等其他安全性服务。

![image-20210101200111145](C:\Users\Jonny\AppData\Roaming\Typora\typora-user-images\image-20210101200111145.png)

### 	TCP服务

**面向连接的服务**:在应用层报文开始流动之前，TCP让客户和服务器互相交换运输层控制信息。这个握手过程**提醒客户和服务器为大量分组的到来做好准备**。**在握手阶段后，一个TCP连接就在两个套接字之间建立了**。这条连接是**全双工的**，即连接双方的进程可以在此连接上同时进行报文收发。**当应用程序结束报文发送时，必须拆除此连接**。



**可靠的数据传输服务**:通信进程能够依靠TCP，**无差错，按适当顺序**交付所有发送的数据。当应用程序的一端将字节流传入到套接字时，它能够依靠TCP将相同的字节流交付给接收方的套接字，而没有字节的丢失和冗余。



**拥塞控制机制**:接收方和发送方网络出现拥堵时，TCP会抑制发送进程。



安全:**无论TCP还是UDP均没有提供任何加密机制**。因此目前研制了TCP加强本**SSL**，Secure Socket layer，SSL加强后TCP可以提供安全性服务，**如果一个应用程序要使用SSL服务，它需要在服务器端和客户端包含SSL代码**（SSL有自己的套接字API，发送主机的SSL加密数据后传入TCP套接字，加密后的数据从TCP套接字转交给服务器的SSL解密，最后发给进程)





### UDP服务

不提供不必要服务的**轻量级运输协议**，仅提供最小服务。

**无连接**，**提供不可靠数据传送服务**，到达进程的报文可能是**乱序**到达的。

**没有拥塞控制机制**。





3.运输层协议不提供的服务

**吞吐量**

**定时保证**

![image-20210101202051511](C:\Users\Jonny\AppData\Roaming\Typora\typora-user-images\image-20210101202051511.png)







### 应用层协议概述

应用层定义了

1.**交换的报文类型**，如请求报文与响应报文

2.**各个报文类型的语法，报文的各个字段以及这些字段是如何描述的**。

3.**字段的语义，即字段中包含的信息的含义**

4.**一个进程何时以及如何发送报文，对报文进行相应的规则**



有的应用层协议由**RFC文档**定义，因此他们就位于公共域中。例如HTTP。还有很多应用层协议是专用的，有意不为公共域使用，如RFC。



应用层协议只是网络应用的一部分。



![image-20210101202906510](C:\Users\Jonny\AppData\Roaming\Typora\typora-user-images\image-20210101202906510.png)

